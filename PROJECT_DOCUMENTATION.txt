================================================================================
DPWH FLOOD CONTROL PROJECT DELAY PREDICTOR
Full Project Documentation
================================================================================

PROJECT OVERVIEW
================================================================================

The DPWH Flood Control Project On-Time Prediction System is a machine learning-
powered web application that predicts whether flood control projects in the 
Philippines will complete on schedule or face delays. Built with Streamlit and 
deployed on Streamlit Cloud, it serves as a decision-support tool for project 
managers and planners.

Live Application: https://flood-control-project-delay-predictor.streamlit.app/

================================================================================
METHODOLOGY
================================================================================

MACHINE LEARNING MODEL
----------------------

Algorithm: Random Forest Classifier
Training Data: Historical DPWH flood control projects
Target Variable: Binary classification
  - On-Time (Class 1): Projects completing within or at the median duration
  - Delayed (Class 0): Projects exceeding the median duration
Total Features: 19 (11 numerical + 8 categorical)


FEATURE ARCHITECTURE
--------------------

Raw Features (User Input):

Numerical Features (10):
  1. ApprovedBudgetForContract - Total approved budget (PHP)
  2. ContractCost - Actual contract cost (PHP)
  3. ContractorCount - Number of contractors (1-3)
  4. FundingYear - Year project was funded (2018-2025)
  5. ProjectLatitude - Geographic latitude
  6. ProjectLongitude - Geographic longitude
  7. ProvincialCapitalLatitude - Capital latitude
  8. ProvincialCapitalLongitude - Capital longitude
  9. StartDate - Project start date
  10. ActualCompletionDate - Project completion date

Categorical Features (8):
  1. MainIsland - Primary island (Luzon, Visayas, Mindanao)
  2. Region - Administrative region
  3. Province - Province name
  4. LegislativeDistrict - Legislative district
  5. Municipality - Municipality/City name
  6. DistrictEngineeringOffice - Responsible engineering office
  7. TypeOfWork - Type of flood control work
  8. ProvincialCapital - Nearest provincial capital


Engineered Features (Auto-Calculated):

The system automatically derives three additional features from raw inputs:

  1. ProjectDuration
     Calculation: ActualCompletionDate - StartDate (in days)
     Purpose: Duration of the project in days

  2. AverageDuration_Region
     Calculation: Mean project duration for the selected region
     Source: Historical data from dpwh_flood_control_projects.csv
     Purpose: Regional baseline for duration comparison

  3. AverageDuration_TypeOfWork
     Calculation: Mean project duration for the selected work type
     Source: Historical data from dpwh_flood_control_projects.csv
     Purpose: Work-type baseline for duration comparison


PREPROCESSING PIPELINE
----------------------

1. Imputation: Missing numerical values are handled using SimpleImputer 
   (mean strategy)

2. Encoding: Categorical features are one-hot encoded using OneHotEncoder

3. Feature Alignment: All features are aligned to match training data structure


FEATURE ENGINEERING PROCESS
----------------------------

During Single Project Prediction:
  1. User enters raw features through the UI
  2. engineer_features() function is called with:
     - Raw user inputs
     - Pre-computed averages by region
     - Pre-computed averages by work type
  3. Function returns complete feature dictionary with engineered features
  4. Features are preprocessed (imputation, encoding) and sent to model

During Batch Prediction (CSV Upload):
  1. CSV file is loaded with raw features
  2. Date columns are converted to datetime format
  3. For each project:
     - Raw data extracted from CSV row
     - engineer_features() function calculates derived features
     - Features are preprocessed and predicted
  4. Results table is generated and can be downloaded

================================================================================
APPLICATION FEATURES
================================================================================

SINGLE PROJECT PREDICTION
--------------------------

Users can enter details for a single project through an organized, multi-section 
form:

Input Sections:
  - Budget & Cost Section: Approved budget and contract cost
  - Project Timeline Section: Start and completion dates
  - Project Team Section: Number of contractors and funding year
  - Project Coordinates Section: Latitude and longitude
  - Provincial Capital Section: Capital coordinates
  - Geographic Section: Island, region, and province
  - Administrative Section: Legislative district, municipality, and 
    engineering office
  - Project Type Section: Type of work and provincial capital

Output:
  - Prediction result (On Time / Delayed)
  - Confidence percentage
  - Visual indicator cards (green for on-time, red for delayed)
  - Probability metrics


BATCH UPLOAD PROCESSING
------------------------

Users can upload CSV files containing multiple projects for bulk predictions.

CSV Requirements:
  - Must include all 19 raw feature columns
  - Dates in YYYY-MM-DD format
  - Exact column names (case-sensitive)

CSV Format:
  ProjectName,ApprovedBudgetForContract,ContractCost,StartDate,
  ActualCompletionDate,ContractorCount,FundingYear,ProjectLatitude,
  ProjectLongitude,ProvincialCapitalLatitude,ProvincialCapitalLongitude,
  MainIsland,Region,Province,LegislativeDistrict,Municipality,
  DistrictEngineeringOffice,TypeOfWork,ProvincialCapital

Batch Output:
  - Results table with:
    * Project Name
    * Top 2 Important Features (from model feature importance)
    * Status (On Time / Delayed)
    * Confidence percentage
  - Downloadable CSV file for further analysis

================================================================================
USER INTERFACE & DESIGN
================================================================================

DARK MODE THEME
----------------

The application uses a professional dark-mode theme inspired by GitHub and 
VS Code.

Color Palette:
  - Background: #0d1117 (deep dark)
  - Secondary Background: #161b22 (cards and sections)
  - Text: #f0f6fc (light blue-white)
  - Primary Accent: #a855f7 (vibrant purple)
  - Success: #3fb950 (GitHub green)
  - Delayed/Error: #f85149 (GitHub red)
  - Borders: #30363d (subtle gray)

Typography:
  - Body Font: Inter (Regular, Medium, SemiBold, Bold)
  - Code Font: JetBrainsMono (Regular, Medium, Bold)
  - Font Source: Google Fonts CDN (for Streamlit Cloud compatibility)

Visual Elements:
  - Material Design icons for section headers
  - Gradient backgrounds for cards
  - Color-coded result cards
  - Responsive column layouts
  - Helpful tooltips on all inputs
  - Professional header with branding


HEADER DESIGN
-------------

The app features a professional branded header with:
  - Wave emoji (ðŸŒŠ) for visual branding
  - "DPWH Flood Control" as main header in green (#3fb950)
  - "Project Delay Prediction System" as subtitle
  - Gradient background (green to dark)
  - Green left border for visual emphasis
  - Proper spacing and typography

================================================================================
TECHNICAL IMPLEMENTATION
================================================================================

PROJECT STRUCTURE
------------------

Project Structure:
  â”œâ”€â”€ app.py                           # Main Streamlit application
  â”œâ”€â”€ .streamlit/
  â”‚   â””â”€â”€ config.toml                 # Theme and font configuration
  â”œâ”€â”€ static/
  â”‚   â”œâ”€â”€ Inter_18pt-*.ttf            # Inter font files
  â”‚   â”œâ”€â”€ JetBrainsMono-*.ttf         # JetBrainsMono font files
  â”‚   â””â”€â”€ OFL-*.txt                   # Font licenses
  â”œâ”€â”€ random_forest_model.joblib      # Trained Random Forest model
  â”œâ”€â”€ imputer_numeric.joblib          # Numerical feature imputer
  â”œâ”€â”€ encoder.joblib                  # Categorical feature encoder
  â”œâ”€â”€ data/
  â”‚   â””â”€â”€ dpwh_flood_control_projects.csv  # Training data
  â”œâ”€â”€ requirements.txt                # Python dependencies
  â”œâ”€â”€ README.md                        # User documentation
  â”œâ”€â”€ FEATURE_ENGINEERING.md          # Feature engineering details
  â”œâ”€â”€ STYLING_CHANGES.md              # UI/UX documentation
  â””â”€â”€ PROJECT_DOCUMENTATION.txt       # This file


KEY FUNCTIONS
--------------

engineer_features():
  Calculates ProjectDuration and historical averages from raw inputs
  Parameters:
    - user_data: Dictionary with raw user inputs
    - avg_by_region: Pre-computed average durations by region
    - avg_by_work_type: Pre-computed average durations by work type
    - global_avg: Fallback average (default: 250 days)
  Returns: Complete feature dictionary with all engineered features

load_and_process_training_data():
  Pre-computes average durations by region and work type from historical data
  Returns: Tuple of (avg_by_region, avg_by_work_type)

load_dark_mode_css():
  Applies custom CSS styling for the dark theme

load_model_and_preprocessors():
  Cached resource loading for model, imputer, and encoder
  Returns: Tuple of (model, imputer_numeric, encoder)


DEPENDENCIES
-------------

Core Libraries:
  - streamlit: Web framework
  - pandas: Data manipulation
  - numpy: Numerical computing
  - scikit-learn: Machine learning (Random Forest, preprocessing)
  - joblib: Model serialization

================================================================================
RESULTS & PERFORMANCE
================================================================================

MODEL CHARACTERISTICS
---------------------

Target: Binary classification (On-Time vs Delayed)
Baseline: Median project duration
Feature Importance: Model provides top 2 important features per prediction
Confidence Scores: Prediction probabilities displayed as percentages


PREDICTION OUTPUT
------------------

Each prediction includes:
  1. Classification: On Time or Delayed
  2. Confidence: Probability percentage (0-100%)
  3. Feature Importance: Top 2 features influencing the prediction
  4. Visual Feedback: Color-coded cards (green/red) with contextual messages


BATCH PROCESSING
-----------------

- Processes multiple projects simultaneously
- Generates downloadable results CSV
- Includes feature importance for each prediction
- Handles missing values automatically
- Processes efficiently even for large files


SUCCESS INDICATORS
-------------------

On-Time Prediction:
  - Green success card (#3fb950)
  - Message: "Project will likely complete on schedule"
  - Context: "Project looks well-positioned for timely completion"
  - Metric: Probability of On-Time Completion (%)

Delayed Prediction:
  - Red warning card (#f85149)
  - Message: "Project may face delays"
  - Context: "Project may experience delays - monitor closely"
  - Metric: Probability of Delay (%)

================================================================================
DEPLOYMENT
================================================================================

PLATFORM
--------

Platform: Streamlit Cloud
URL: https://flood-control-project-delay-predictor.streamlit.app/
Font Configuration: Uses Google Fonts CDN for reliable font delivery


FONT CONFIGURATION
-------------------

Fonts are loaded via Google Fonts API with proper weight support:
  - Inter: weights 400, 500, 600, 700
  - JetBrainsMono: weights 400, 500, 700
  - CSS Import Format: https://fonts.googleapis.com/css2?family=...
  - Display Strategy: font-display=swap for optimal loading


LOCAL DEVELOPMENT
------------------

To run the app locally:
  cd "c:\Users\Ian\Documents\Classes\Elective 1\PIT\Flood Control Project Delay Predictor"
  python -m streamlit run app.py

The app will open in your browser at http://localhost:8501

================================================================================
USAGE TIPS & BEST PRACTICES
================================================================================

SINGLE PROJECT PREDICTIONS
---------------------------

1. Budget Data: Use realistic values for Philippine flood control projects
2. Duration Data: Historical averages are automatically calculated from 
   training data
3. Geographic Data: Verify coordinates are within Philippine bounds 
   (5-20Â°N, 117-127Â°E)
4. Categorical Data: Use exact values from dropdown menus for accurate encoding
5. Date Format: Ensure dates are in proper format (YYYY-MM-DD for CSV)


BATCH PROCESSING
-----------------

1. CSV Format: Ensure all required columns are present with exact names
2. Data Quality: Verify data consistency before uploading
3. Large Files: For 1000+ rows, processing may take longer
4. Missing Values: Numerical missing values will be imputed; categorical 
   fields cannot be empty
5. Download Results: Save the results CSV for further analysis


TROUBLESHOOTING
----------------

File Upload Error: 
  - Ensure your CSV has all required columns with exact names (case-sensitive)

Missing Values: 
  - The imputer will handle missing numerical values
  - Categorical fields cannot be empty

Memory Issues: 
  - For very large batch files (1000+ rows), processing may take longer

Font Display Issues:
  - Fonts are loaded from Google Fonts CDN
  - Clear browser cache if fonts don't display correctly

================================================================================
PROJECT BENEFITS
================================================================================

âœ“ Data-Driven Decision Making: Predictions based on historical project data
âœ“ Dual Functionality: Single project and batch processing capabilities
âœ“ Automatic Feature Engineering: Users only input raw data
âœ“ Confidence Metrics: Probability scores for each prediction
âœ“ Feature Importance: Understand which factors drive predictions
âœ“ Professional UI: Dark theme with modern design
âœ“ Cloud Deployment: Accessible from anywhere via web browser
âœ“ Scalability: Can process multiple projects efficiently
âœ“ Reproducibility: Consistent engineering logic across all predictions
âœ“ User-Friendly: Organized input sections with helpful tooltips

================================================================================
PROJECT SUMMARY
================================================================================

The DPWH Flood Control Project Delay Predictor provides a data-driven approach 
to predicting project delays in the Philippines. By combining machine learning 
with an intuitive web interface, it enables project managers to:

  - Assess individual project completion likelihood
  - Process multiple projects in batch mode
  - Understand key factors affecting project timelines
  - Make informed decisions about resource allocation
  - Monitor project portfolios for risk management

The system automatically engineers features from raw project data, ensuring 
consistency and reducing user input burden. The professional dark-mode interface 
provides a modern, accessible experience for both single predictions and 
large-scale portfolio analysis.

================================================================================
END OF DOCUMENTATION
================================================================================
